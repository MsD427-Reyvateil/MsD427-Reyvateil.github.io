<footer class="container mx-auto flex flex-col justify-items-center text-sm leading-6 mt-24 mb-4 text-slate-700 dark:text-slate-200">

  {{ partial "functions/get_hook" (dict "hook" "footer-start" "context" .) }}

  {{/* Load footer block */}}
  {{- $footer_config := site.Params.hugoblox.footer | default dict -}}
  {{- $footer_section_name := partial "hbx/resolve-block-param" (dict "config" $footer_config "context" "footer") | default "minimal" -}}
  {{ $footer_section_path := printf "components/footers/%s.html" $footer_section_name }}
  {{ if not (templates.Exists (printf "_partials/%s" $footer_section_path)) }}
    {{ errorf "Check your `params.yaml`. Cannot find footer block at `layouts/_partials/%s`" $footer_section_path }}
  {{ end }}
  {{ partial $footer_section_path . }}

  {{/* Attribution - PLEASE DO NOT REMOVE THIS, SUPPORT OPEN SOURCE */}}
  
  {{/* Check for Pro license key */}}
  {{- $license_key := getenv "HUGO_BLOX_LICENSE" -}}
  {{- $has_pro_license := false -}}
  
  {{- if $license_key -}}
    {{/* Validate UUID v4 format */}}
    {{- $uuid_pattern := "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$" -}}
    {{- $is_valid_format := findRE $uuid_pattern (lower $license_key) -}}
    {{- $has_pro_license = gt (len $is_valid_format) 0 -}}
  {{- end -}}
  
  {{/* Check user preference */}}
  {{- $wants_to_hide := site.Params.hugoblox.pro.hide_attribution | default false -}}
  
  {{/* Determine if we show attribution */}}
  {{- $show_attribution := true -}}
  
  {{- if $has_pro_license -}}
    {{/* Pro user - respect their choice */}}
    {{- $show_attribution = not $wants_to_hide -}}
  {{- else if $wants_to_hide -}}
    {{/* Free user trying to hide - show warning and attribution */}}
    {{- warnf "Attribution removal requires a Pro subscription. Get Pro at https://hugoblox.com/pro \nAlready subscribed to Pro? Reach out in the Pro Discord channel for support." -}}
    {{- $show_attribution = true -}}
  {{- end -}}
  
  {{/* Attribution disabled */}}  

</footer>
